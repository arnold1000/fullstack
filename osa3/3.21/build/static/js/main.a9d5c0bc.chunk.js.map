{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/personservice.js","App.js","index.js"],"names":["Filter","props","react_default","a","createElement","onChange","filterchange","Persons","personsToShow","allpeople","filter","person","name","toLowerCase","includes","usefilter","map","key","number","onClick","deletion","id","PersonForm","onSubmit","submit","value","namechange","numberchange","type","baseUrl","personservice","getAll","axios","get","then","response","data","create","newObject","post","update","put","concat","delete","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","personService","initialPersons","_ref","message","className","components_Filter","event","target","components_PersonForm","preventDefault","personObject","every","setTimeout","catch","error","console","log","confirmupdate","window","confirm","find","n","components_Persons","service","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a9d5c0bc.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n  return(\r\n    <div>\r\n        filter shown with <input onChange = {props.filterchange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\n\r\nconst Persons = (props) => {\r\n\r\n  const personsToShow = props.allpeople.filter(person => person.name.toLowerCase().includes(props.usefilter))\r\n\r\n\r\n  const renderPerson = () => personsToShow.map(person => <p key = {person.name}>{person.name} {person.number} <button onClick = {() => props.deletion(person.id)}>delete</button></p>)\r\n\r\n  return(\r\n    <div>\r\n      {renderPerson()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n  return(\r\n    <div>\r\n    <form onSubmit = {props.submit}>\r\n      <div>\r\n        name: <input\r\n        value = {props.name}\r\n        onChange = {props.namechange}\r\n        />\r\n      </div>\r\n      <div>\r\n        number: <input\r\n        value = {props.number}\r\n        onChange = {props.numberchange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n\r\n    </form>\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => {\r\n    return response.data\r\n  })\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletion = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, update, deletion}\r\n","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/personservice'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([\r\n    { name: '' , number: ''}\r\n  ])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newFilter, setNewFilter ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const personObject = {\r\n      name : newName,\r\n      number : newNumber\r\n    }\r\n\r\n    if(persons.every(person => person.name !== newName)){\r\n\r\n      personService\r\n        .create(personObject)\r\n        .then(person => {\r\n          setPersons(persons.concat(person))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setErrorMessage(`Added ${personObject.name} `)\r\n          setTimeout(() => {setErrorMessage(null)}, 5000)\r\n        }).catch(error => {\r\n          console.log(error.response.data)\r\n          setErrorMessage(error.response.data.error)\r\n          setTimeout(() => {setErrorMessage(null)}, 5000)\r\n        })\r\n\r\n        } else {\r\n\r\n      const confirmupdate = window.confirm(`${personObject.name} is already added to the phonebook, replace the old number with a new one?`)\r\n\r\n      const id = persons.find(person => person.name === personObject.name).id\r\n\r\n\r\n      if(confirmupdate){\r\n        personService.update(id, personObject)\r\n        .then(response => {\r\n          setPersons(persons.map(person => person.id !== id ? person : response))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setErrorMessage(`Changed the number of ${personObject.name} `)\r\n          setTimeout(() => {setErrorMessage(null)}, 5000)\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(`Information of ${personObject.name} has already been removed from server`)\r\n          setPersons(persons.filter(n => n.id !== id))\r\n          setTimeout(() => {setErrorMessage(null)}, 5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        }\r\n        )\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const name = persons.find(person => person.id === id)\r\n    const confirmDelete = window.confirm(`Delete ${name.name} ?`)\r\n\r\n    if(confirmDelete){\r\n      personService.deletion(id)\r\n      .then(\r\n        setPersons(persons.filter(person => person !== name ))\r\n        ,setErrorMessage(`Deleted ${name.name} `)\r\n        ,setTimeout(() => {setErrorMessage(null)}, 5000)\r\n\r\n      ).catch(error => {\r\n        setErrorMessage(`Information of ${name.name} has already been removed from server`)\r\n        setPersons(persons.filter(n => n.id !== id))\r\n        setTimeout(() => {setErrorMessage(null)}, 5000)\r\n      })\r\n\r\n\r\n    }\r\n  }\r\n\r\n  const Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage}/>\r\n      <Filter filterchange = {handleFilterChange}/>\r\n      <h2>add a new</h2>\r\n      <PersonForm submit = {addPerson} name = {newName} number = {newNumber} namechange = {handleNameChange} numberchange = {handleNumberChange}/>\r\n      <h2>Numbers</h2>\r\n      <Persons allpeople = {persons} usefilter = {newFilter} service = {personService} deletion = {deletePerson}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css'\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}